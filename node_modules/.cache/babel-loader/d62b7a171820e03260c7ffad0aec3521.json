{"ast":null,"code":"\"use strict\";\n\nvar _defineProperty = require(\"/Users/samsamaei/Documents/Projects/falcon/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\n\nvar _objectSpread = require(\"/Users/samsamaei/Documents/Projects/falcon/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.upload = upload;\n\nvar _dom = require(\"@testing-library/dom\");\n\nvar _click = require(\"./click\");\n\nvar _blur = require(\"./blur\");\n\nvar _focus = require(\"./focus\");\n\nvar _utils = require(\"./utils\");\n\nfunction upload(element, fileOrFiles, init) {\n  var _ref = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n      _ref$applyAccept = _ref.applyAccept,\n      applyAccept = _ref$applyAccept === void 0 ? false : _ref$applyAccept;\n\n  var _input$files;\n\n  var input = (0, _utils.isElementType)(element, 'label') ? element.control : element;\n\n  if (!input || !(0, _utils.isElementType)(input, 'input', {\n    type: 'file'\n  })) {\n    throw new TypeError(\"The \".concat(input === element ? 'given' : 'associated', \" \").concat(input == null ? void 0 : input.tagName, \" element does not accept file uploads\"));\n  }\n\n  if ((0, _utils.isDisabled)(element)) return;\n  (0, _click.click)(element, init == null ? void 0 : init.clickInit);\n  var files = (Array.isArray(fileOrFiles) ? fileOrFiles : [fileOrFiles]).filter(function (file) {\n    return !applyAccept || isAcceptableFile(file, input.accept);\n  }).slice(0, input.multiple ? undefined : 1); // blur fires when the file selector pops up\n\n  (0, _blur.blur)(element); // focus fires when they make their selection\n\n  (0, _focus.focus)(element); // do not fire an input event if the file selection does not change\n\n  if (files.length === ((_input$files = input.files) == null ? void 0 : _input$files.length) && files.every(function (f, i) {\n    var _input$files2;\n\n    return f === ((_input$files2 = input.files) == null ? void 0 : _input$files2.item(i));\n  })) {\n    return;\n  } // the event fired in the browser isn't actually an \"input\" or \"change\" event\n  // but a new Event with a type set to \"input\" and \"change\"\n  // Kinda odd...\n\n\n  var inputFiles = _objectSpread(_objectSpread({}, files), {}, _defineProperty({\n    length: files.length,\n    item: function item(index) {\n      return files[index];\n    }\n  }, Symbol.iterator, function () {\n    var i = 0;\n    return {\n      next: function next() {\n        return {\n          done: i >= files.length,\n          value: files[i++]\n        };\n      }\n    };\n  }));\n\n  (0, _dom.fireEvent)(input, (0, _dom.createEvent)('input', input, {\n    target: {\n      files: inputFiles\n    },\n    bubbles: true,\n    cancelable: false,\n    composed: true\n  }));\n\n  _dom.fireEvent.change(input, _objectSpread({\n    target: {\n      files: inputFiles\n    }\n  }, init == null ? void 0 : init.changeInit));\n}\n\nfunction isAcceptableFile(file, accept) {\n  if (!accept) {\n    return true;\n  }\n\n  var wildcards = ['audio/*', 'image/*', 'video/*'];\n  return accept.split(',').some(function (acceptToken) {\n    if (acceptToken.startsWith('.')) {\n      // tokens starting with a dot represent a file extension\n      return file.name.endsWith(acceptToken);\n    } else if (wildcards.includes(acceptToken)) {\n      return file.type.startsWith(acceptToken.substr(0, acceptToken.length - 1));\n    }\n\n    return file.type === acceptToken;\n  });\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","upload","_dom","require","_click","_blur","_focus","_utils","element","fileOrFiles","init","applyAccept","_input$files","input","isElementType","control","type","TypeError","tagName","isDisabled","click","clickInit","files","Array","isArray","filter","file","isAcceptableFile","accept","slice","multiple","undefined","blur","focus","length","every","f","i","_input$files2","item","inputFiles","index","Symbol","iterator","next","done","fireEvent","createEvent","target","bubbles","cancelable","composed","change","changeInit","wildcards","split","some","acceptToken","startsWith","name","endsWith","includes","substr"],"sources":["/Users/samsamaei/Documents/Projects/falcon/node_modules/@testing-library/user-event/dist/upload.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.upload = upload;\n\nvar _dom = require(\"@testing-library/dom\");\n\nvar _click = require(\"./click\");\n\nvar _blur = require(\"./blur\");\n\nvar _focus = require(\"./focus\");\n\nvar _utils = require(\"./utils\");\n\nfunction upload(element, fileOrFiles, init, {\n  applyAccept = false\n} = {}) {\n  var _input$files;\n\n  const input = (0, _utils.isElementType)(element, 'label') ? element.control : element;\n\n  if (!input || !(0, _utils.isElementType)(input, 'input', {\n    type: 'file'\n  })) {\n    throw new TypeError(`The ${input === element ? 'given' : 'associated'} ${input == null ? void 0 : input.tagName} element does not accept file uploads`);\n  }\n\n  if ((0, _utils.isDisabled)(element)) return;\n  (0, _click.click)(element, init == null ? void 0 : init.clickInit);\n  const files = (Array.isArray(fileOrFiles) ? fileOrFiles : [fileOrFiles]).filter(file => !applyAccept || isAcceptableFile(file, input.accept)).slice(0, input.multiple ? undefined : 1); // blur fires when the file selector pops up\n\n  (0, _blur.blur)(element); // focus fires when they make their selection\n\n  (0, _focus.focus)(element); // do not fire an input event if the file selection does not change\n\n  if (files.length === ((_input$files = input.files) == null ? void 0 : _input$files.length) && files.every((f, i) => {\n    var _input$files2;\n\n    return f === ((_input$files2 = input.files) == null ? void 0 : _input$files2.item(i));\n  })) {\n    return;\n  } // the event fired in the browser isn't actually an \"input\" or \"change\" event\n  // but a new Event with a type set to \"input\" and \"change\"\n  // Kinda odd...\n\n\n  const inputFiles = { ...files,\n    length: files.length,\n    item: index => files[index],\n\n    [Symbol.iterator]() {\n      let i = 0;\n      return {\n        next: () => ({\n          done: i >= files.length,\n          value: files[i++]\n        })\n      };\n    }\n\n  };\n  (0, _dom.fireEvent)(input, (0, _dom.createEvent)('input', input, {\n    target: {\n      files: inputFiles\n    },\n    bubbles: true,\n    cancelable: false,\n    composed: true\n  }));\n\n  _dom.fireEvent.change(input, {\n    target: {\n      files: inputFiles\n    },\n    ...(init == null ? void 0 : init.changeInit)\n  });\n}\n\nfunction isAcceptableFile(file, accept) {\n  if (!accept) {\n    return true;\n  }\n\n  const wildcards = ['audio/*', 'image/*', 'video/*'];\n  return accept.split(',').some(acceptToken => {\n    if (acceptToken.startsWith('.')) {\n      // tokens starting with a dot represent a file extension\n      return file.name.endsWith(acceptToken);\n    } else if (wildcards.includes(acceptToken)) {\n      return file.type.startsWith(acceptToken.substr(0, acceptToken.length - 1));\n    }\n\n    return file.type === acceptToken;\n  });\n}"],"mappings":"AAAA;;;;;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAC3CC,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,MAAR,GAAiBA,MAAjB;;AAEA,IAAIC,IAAI,GAAGC,OAAO,CAAC,sBAAD,CAAlB;;AAEA,IAAIC,MAAM,GAAGD,OAAO,CAAC,SAAD,CAApB;;AAEA,IAAIE,KAAK,GAAGF,OAAO,CAAC,QAAD,CAAnB;;AAEA,IAAIG,MAAM,GAAGH,OAAO,CAAC,SAAD,CAApB;;AAEA,IAAII,MAAM,GAAGJ,OAAO,CAAC,SAAD,CAApB;;AAEA,SAASF,MAAT,CAAgBO,OAAhB,EAAyBC,WAAzB,EAAsCC,IAAtC,EAEQ;EAAA,+EAAJ,EAAI;EAAA,4BADNC,WACM;EAAA,IADNA,WACM,iCADQ,KACR;;EACN,IAAIC,YAAJ;;EAEA,IAAMC,KAAK,GAAG,CAAC,GAAGN,MAAM,CAACO,aAAX,EAA0BN,OAA1B,EAAmC,OAAnC,IAA8CA,OAAO,CAACO,OAAtD,GAAgEP,OAA9E;;EAEA,IAAI,CAACK,KAAD,IAAU,CAAC,CAAC,GAAGN,MAAM,CAACO,aAAX,EAA0BD,KAA1B,EAAiC,OAAjC,EAA0C;IACvDG,IAAI,EAAE;EADiD,CAA1C,CAAf,EAEI;IACF,MAAM,IAAIC,SAAJ,eAAqBJ,KAAK,KAAKL,OAAV,GAAoB,OAApB,GAA8B,YAAnD,cAAmEK,KAAK,IAAI,IAAT,GAAgB,KAAK,CAArB,GAAyBA,KAAK,CAACK,OAAlG,2CAAN;EACD;;EAED,IAAI,CAAC,GAAGX,MAAM,CAACY,UAAX,EAAuBX,OAAvB,CAAJ,EAAqC;EACrC,CAAC,GAAGJ,MAAM,CAACgB,KAAX,EAAkBZ,OAAlB,EAA2BE,IAAI,IAAI,IAAR,GAAe,KAAK,CAApB,GAAwBA,IAAI,CAACW,SAAxD;EACA,IAAMC,KAAK,GAAG,CAACC,KAAK,CAACC,OAAN,CAAcf,WAAd,IAA6BA,WAA7B,GAA2C,CAACA,WAAD,CAA5C,EAA2DgB,MAA3D,CAAkE,UAAAC,IAAI;IAAA,OAAI,CAACf,WAAD,IAAgBgB,gBAAgB,CAACD,IAAD,EAAOb,KAAK,CAACe,MAAb,CAApC;EAAA,CAAtE,EAAgIC,KAAhI,CAAsI,CAAtI,EAAyIhB,KAAK,CAACiB,QAAN,GAAiBC,SAAjB,GAA6B,CAAtK,CAAd,CAbM,CAakL;;EAExL,CAAC,GAAG1B,KAAK,CAAC2B,IAAV,EAAgBxB,OAAhB,EAfM,CAeoB;;EAE1B,CAAC,GAAGF,MAAM,CAAC2B,KAAX,EAAkBzB,OAAlB,EAjBM,CAiBsB;;EAE5B,IAAIc,KAAK,CAACY,MAAN,MAAkB,CAACtB,YAAY,GAAGC,KAAK,CAACS,KAAtB,KAAgC,IAAhC,GAAuC,KAAK,CAA5C,GAAgDV,YAAY,CAACsB,MAA/E,KAA0FZ,KAAK,CAACa,KAAN,CAAY,UAACC,CAAD,EAAIC,CAAJ,EAAU;IAClH,IAAIC,aAAJ;;IAEA,OAAOF,CAAC,MAAM,CAACE,aAAa,GAAGzB,KAAK,CAACS,KAAvB,KAAiC,IAAjC,GAAwC,KAAK,CAA7C,GAAiDgB,aAAa,CAACC,IAAd,CAAmBF,CAAnB,CAAvD,CAAR;EACD,CAJ6F,CAA9F,EAII;IACF;EACD,CAzBK,CAyBJ;EACF;EACA;;;EAGA,IAAMG,UAAU,mCAAQlB,KAAR;IACdY,MAAM,EAAEZ,KAAK,CAACY,MADA;IAEdK,IAAI,EAAE,cAAAE,KAAK;MAAA,OAAInB,KAAK,CAACmB,KAAD,CAAT;IAAA;EAFG,GAIbC,MAAM,CAACC,QAJM,cAIM;IAClB,IAAIN,CAAC,GAAG,CAAR;IACA,OAAO;MACLO,IAAI,EAAE;QAAA,OAAO;UACXC,IAAI,EAAER,CAAC,IAAIf,KAAK,CAACY,MADN;UAEXlC,KAAK,EAAEsB,KAAK,CAACe,CAAC,EAAF;QAFD,CAAP;MAAA;IADD,CAAP;EAMD,CAZa,EAAhB;;EAeA,CAAC,GAAGnC,IAAI,CAAC4C,SAAT,EAAoBjC,KAApB,EAA2B,CAAC,GAAGX,IAAI,CAAC6C,WAAT,EAAsB,OAAtB,EAA+BlC,KAA/B,EAAsC;IAC/DmC,MAAM,EAAE;MACN1B,KAAK,EAAEkB;IADD,CADuD;IAI/DS,OAAO,EAAE,IAJsD;IAK/DC,UAAU,EAAE,KALmD;IAM/DC,QAAQ,EAAE;EANqD,CAAtC,CAA3B;;EASAjD,IAAI,CAAC4C,SAAL,CAAeM,MAAf,CAAsBvC,KAAtB;IACEmC,MAAM,EAAE;MACN1B,KAAK,EAAEkB;IADD;EADV,GAIM9B,IAAI,IAAI,IAAR,GAAe,KAAK,CAApB,GAAwBA,IAAI,CAAC2C,UAJnC;AAMD;;AAED,SAAS1B,gBAAT,CAA0BD,IAA1B,EAAgCE,MAAhC,EAAwC;EACtC,IAAI,CAACA,MAAL,EAAa;IACX,OAAO,IAAP;EACD;;EAED,IAAM0B,SAAS,GAAG,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,CAAlB;EACA,OAAO1B,MAAM,CAAC2B,KAAP,CAAa,GAAb,EAAkBC,IAAlB,CAAuB,UAAAC,WAAW,EAAI;IAC3C,IAAIA,WAAW,CAACC,UAAZ,CAAuB,GAAvB,CAAJ,EAAiC;MAC/B;MACA,OAAOhC,IAAI,CAACiC,IAAL,CAAUC,QAAV,CAAmBH,WAAnB,CAAP;IACD,CAHD,MAGO,IAAIH,SAAS,CAACO,QAAV,CAAmBJ,WAAnB,CAAJ,EAAqC;MAC1C,OAAO/B,IAAI,CAACV,IAAL,CAAU0C,UAAV,CAAqBD,WAAW,CAACK,MAAZ,CAAmB,CAAnB,EAAsBL,WAAW,CAACvB,MAAZ,GAAqB,CAA3C,CAArB,CAAP;IACD;;IAED,OAAOR,IAAI,CAACV,IAAL,KAAcyC,WAArB;EACD,CATM,CAAP;AAUD"},"metadata":{},"sourceType":"script"}