{"ast":null,"code":"import _slicedToArray from\"/Users/samsamaei/Documents/Projects/falcon/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useRef,useEffect,useState}from\"react\";import TestContext from\"../../../Context/testContext\";import AuthContext from\"../../../Context/Auth/authContext\";import Swal from\"sweetalert2\";import\"sweetalert2/src/sweetalert2.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function useEffectSkipFirst(fn,arr){var isFirst=useRef(true);useEffect(function(){if(isFirst.current){isFirst.current=false;return;}fn();},arr);}var Location=function Location(){var testContext=useContext(TestContext);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),country=_useState2[0],setCountry=_useState2[1];var authContext=useContext(AuthContext);var user=authContext.user,login=authContext.login,isAuthenticated=authContext.isAuthenticated,logout=authContext.logout;var GetCountries=testContext.GetCountries,countriesData=testContext.countriesData,userInfoData=testContext.userInfoData,GetUserInfo=testContext.GetUserInfo,updateUserData=testContext.updateUserData,UpdateUserLocation=testContext.UpdateUserLocation,SetUserlocation=testContext.SetUserlocation,updateUserLocationData=testContext.updateUserLocationData;var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),DataUser=_useState4[0],setDataUser=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),CountryId=_useState6[0],setCountryId=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),City=_useState8[0],setCity=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),showMessage=_useState10[0],setShowMessage=_useState10[1];useEffect(function(){GetCountries();GetUserInfo();},[]);useEffectSkipFirst(function(){if(userInfoData){var newItem={};setCountryId(userInfoData.CountryId);setCity(userInfoData.City);// return newItem;\nsetDataUser(newItem);}},[userInfoData]);var sendUserData=function sendUserData(){var newUser={};newUser.CountryId=parseInt(CountryId);newUser.City=City;UpdateUserLocation(newUser);};useEffectSkipFirst(function(){if(updateUserLocationData){{setShowMessage(true);SetUserlocation(null);}}},[updateUserLocationData]);useEffectSkipFirst(function(){if(showMessage){Swal.fire({position:\"center\",icon:\"success\",title:\"Your Location has been Updated\",showConfirmButton:false,timer:1500});setShowMessage(false);}},[showMessage]);return/*#__PURE__*/_jsxs(\"div\",{className:\"Setiings\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Title\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Your Location\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"PersonalEdit\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Country\"}),/*#__PURE__*/_jsx(\"select\",{value:CountryId,onChange:function onChange(e){setCountryId(e.target.value);},children:countriesData?countriesData.map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item.id,children:item.Country});}):[]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"City\"}),/*#__PURE__*/_jsx(\"input\",{type:\"Text\",value:City,onChange:function onChange(e){setCity(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"itemEtra\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){sendUserData();},children:\"Save Changes\"})})]})]});};export default Location;","map":{"version":3,"names":["React","useContext","useRef","useEffect","useState","TestContext","AuthContext","Swal","useEffectSkipFirst","fn","arr","isFirst","current","Location","testContext","country","setCountry","authContext","user","login","isAuthenticated","logout","GetCountries","countriesData","userInfoData","GetUserInfo","updateUserData","UpdateUserLocation","SetUserlocation","updateUserLocationData","DataUser","setDataUser","CountryId","setCountryId","City","setCity","showMessage","setShowMessage","newItem","sendUserData","newUser","parseInt","fire","position","icon","title","showConfirmButton","timer","e","target","value","map","item","id","Country"],"sources":["/Users/samsamaei/Documents/Projects/falcon/src/Components/UserEdit/Items/Location.js"],"sourcesContent":["import React, { useContext, useRef, useEffect, useState } from \"react\";\nimport TestContext from \"../../../Context/testContext\";\nimport AuthContext from \"../../../Context/Auth/authContext\";\nimport Swal from \"sweetalert2\";\nimport \"sweetalert2/src/sweetalert2.scss\";\n\nfunction useEffectSkipFirst(fn, arr) {\n  const isFirst = useRef(true);\n  useEffect(() => {\n    if (isFirst.current) {\n      isFirst.current = false;\n      return;\n    }\n    fn();\n  }, arr);\n}\n\nconst Location = () => {\n  const testContext = useContext(TestContext);\n  const [country, setCountry] = useState(null);\n  const authContext = useContext(AuthContext);\n  const { user, login, isAuthenticated, logout } = authContext;\n\n  const {\n    GetCountries,\n    countriesData,\n    userInfoData,\n    GetUserInfo,\n    updateUserData,\n    UpdateUserLocation,\n    SetUserlocation,\n    updateUserLocationData,\n  } = testContext;\n\n  const [DataUser, setDataUser] = useState(null);\n  const [CountryId, setCountryId] = useState(null);\n  const [City, setCity] = useState(null);\n  const [showMessage, setShowMessage] = useState(null);\n\n  useEffect(() => {\n    GetCountries();\n    GetUserInfo();\n  }, []);\n\n  useEffectSkipFirst(() => {\n    if (userInfoData) {\n      let newItem = {};\n      setCountryId(userInfoData.CountryId);\n      setCity(userInfoData.City);\n\n      // return newItem;\n      setDataUser(newItem);\n    }\n  }, [userInfoData]);\n\n  const sendUserData = () => {\n    let newUser = {};\n    newUser.CountryId = parseInt(CountryId);\n    newUser.City = City;\n\n    UpdateUserLocation(newUser);\n  };\n  useEffectSkipFirst(() => {\n    if (updateUserLocationData) {\n      {\n        setShowMessage(true);\n        SetUserlocation(null);\n      }\n    }\n  }, [updateUserLocationData]);\n\n  useEffectSkipFirst(() => {\n    if (showMessage) {\n      Swal.fire({\n        position: \"center\",\n        icon: \"success\",\n        title: \"Your Location has been Updated\",\n        showConfirmButton: false,\n        timer: 1500,\n      });\n      setShowMessage(false);\n    }\n  }, [showMessage]);\n\n  return (\n    <div className=\"Setiings\">\n      <div className=\"Title\">\n        <h4>Your Location</h4>\n      </div>\n      <div className=\"PersonalEdit\">\n        <div className=\"item\">\n          <h5>Country</h5>\n          <select\n            value={CountryId}\n            onChange={(e) => {\n              setCountryId(e.target.value);\n            }}\n          >\n            {countriesData\n              ? countriesData.map((item) => {\n                  return <option value={item.id}>{item.Country}</option>;\n                })\n              : []}\n          </select>\n        </div>\n        <div className=\"item\">\n          <h5>City</h5>\n          <input\n            type=\"Text\"\n            value={City}\n            onChange={(e) => {\n              setCity(e.target.value);\n            }}\n          />\n        </div>\n        <div className=\"itemEtra\">\n          <button\n            onClick={(e) => {\n              sendUserData();\n            }}\n          >\n            Save Changes\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Location;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}