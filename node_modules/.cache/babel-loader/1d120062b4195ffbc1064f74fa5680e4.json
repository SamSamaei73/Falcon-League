{"ast":null,"code":"import _slicedToArray from\"/Users/samsamaei/Documents/Projects/falcon/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useRef,useEffect,useState}from\"react\";import TestContext from\"../../Context/testContext\";import AuthContext from\"../../Context/Auth/authContext\";import\"../../Scss/Firstpage.scss\";import Coin from\"../../Images/coins.png\";import{NavLink}from\"react-router-dom\";import Swal from\"sweetalert2\";import\"sweetalert2/src/sweetalert2.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function useEffectSkipFirst(fn,arr){var isFirst=useRef(true);useEffect(function(){if(isFirst.current){isFirst.current=false;return;}fn();},arr);}var BoxIvonet=function BoxIvonet(_ref){var gameId=_ref.gameId;var testContext=useContext(TestContext);var authContext=useContext(AuthContext);var user=authContext.user,login=authContext.login,isAuthenticated=authContext.isAuthenticated,logout=authContext.logout;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),IdGame=_useState2[0],setIdGame=_useState2[1];var GetActiveTournaments=testContext.GetActiveTournaments,activeTournamentData=testContext.activeTournamentData,registerGameUserData=testContext.registerGameUserData,RegisterUserForGame=testContext.RegisterUserForGame,SetRegisterTournament=testContext.SetRegisterTournament,err=testContext.err;var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),gameUserdata=_useState4[0],setgameUserdata=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),GameId=_useState6[0],setGameId=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),TournamentId=_useState8[0],setTournamentId=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),showMessage=_useState10[0],setShowMessage=_useState10[1];useEffect(function(){setIdGame(gameId);GetActiveTournaments(gameId);},[]);useEffectSkipFirst(function(){if(gameId){GetActiveTournaments(gameId);}},[gameId]);useEffectSkipFirst(function(){if(registerGameUserData){console.log(\"registerdata\",registerGameUserData);if(registerGameUserData.userError){Swal.fire(\"you dont have userId\",\"you must Add your Game id in My profile page\",\"warning\");SetRegisterTournament(null);}else if(registerGameUserData.registeredError){Swal.fire({title:\"your user has been registered\",icon:\"warning\"});SetRegisterTournament(null);}else{setShowMessage(true);SetRegisterTournament(null);}}},[registerGameUserData]);useEffectSkipFirst(function(){if(showMessage){Swal.fire({position:\"center\",icon:\"success\",title:\"your tournment has been added\",timer:2000});setShowMessage(false);}},[showMessage]);var SendInfo=function SendInfo(id){var gameData={};gameData.GameId=gameId;gameData.TournamentId=parseInt(id);RegisterUserForGame(gameData);};var FreeCost=function FreeCost(value){if(value==0||!value){return\"Free\";}else{return value;}};return/*#__PURE__*/_jsx(\"div\",{className:\"ItemMatch\",children:activeTournamentData?activeTournamentData.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{id:\"BoxIvonet\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"titleIvonet\",children:/*#__PURE__*/_jsx(\"h4\",{children:item.Title})}),/*#__PURE__*/_jsx(\"div\",{className:\"itemMatch\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\" \",item.StartDate,\" - \",item.EndDate]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"itemMatch\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"PRIZE\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"primary\",children:[item.Prize,\"$\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"itemMatch\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"SCORING\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"primary\",children:[\"BEST OF \",item.Winning,\" GAME\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"itemMatch\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"DIVISIONS\"}),/*#__PURE__*/_jsx(\"label\",{className:\"primary\",children:item.KDLimit})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"itemMatch\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"priceCoin\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"coinImg\",children:/*#__PURE__*/_jsx(\"img\",{src:Coin,alt:\"Coin\"})}),/*#__PURE__*/_jsx(\"label\",{children:item.EntryFee?item.EntryFee:FreeCost(item.EntryFee)})]}),user?/*#__PURE__*/_jsxs(\"button\",{id:item.id,onClick:function onClick(e){SendInfo(e.target.id);},children:[\" \",\"REGISTER\"]}):/*#__PURE__*/_jsx(NavLink,{to:\"/Login\",children:/*#__PURE__*/_jsx(\"button\",{children:\" REGISTER\"})})]})]},item.id);}):null});};export default BoxIvonet;","map":{"version":3,"names":["React","useContext","useRef","useEffect","useState","TestContext","AuthContext","Coin","NavLink","Swal","useEffectSkipFirst","fn","arr","isFirst","current","BoxIvonet","gameId","testContext","authContext","user","login","isAuthenticated","logout","IdGame","setIdGame","GetActiveTournaments","activeTournamentData","registerGameUserData","RegisterUserForGame","SetRegisterTournament","err","gameUserdata","setgameUserdata","GameId","setGameId","TournamentId","setTournamentId","showMessage","setShowMessage","console","log","userError","fire","registeredError","title","icon","position","timer","SendInfo","id","gameData","parseInt","FreeCost","value","map","item","Title","StartDate","EndDate","Prize","Winning","KDLimit","EntryFee","e","target"],"sources":["/Users/samsamaei/Documents/Projects/falcon/src/Components/Firstpage/BoxIvonet.js"],"sourcesContent":["import React, { useContext, useRef, useEffect, useState } from \"react\";\r\nimport TestContext from \"../../Context/testContext\";\r\nimport AuthContext from \"../../Context/Auth/authContext\";\r\nimport \"../../Scss/Firstpage.scss\";\r\nimport Coin from \"../../Images/coins.png\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport Swal from \"sweetalert2\";\r\nimport \"sweetalert2/src/sweetalert2.scss\";\r\n\r\nfunction useEffectSkipFirst(fn, arr) {\r\n  const isFirst = useRef(true);\r\n  useEffect(() => {\r\n    if (isFirst.current) {\r\n      isFirst.current = false;\r\n      return;\r\n    }\r\n    fn();\r\n  }, arr);\r\n}\r\n\r\nconst BoxIvonet = ({ gameId }) => {\r\n  const testContext = useContext(TestContext);\r\n  const authContext = useContext(AuthContext);\r\n  const { user, login, isAuthenticated, logout } = authContext;\r\n\r\n  const [IdGame, setIdGame] = useState(null);\r\n  const {\r\n    GetActiveTournaments,\r\n    activeTournamentData,\r\n    registerGameUserData,\r\n    RegisterUserForGame,\r\n    SetRegisterTournament,\r\n    err,\r\n  } = testContext;\r\n  const [gameUserdata, setgameUserdata] = useState(null);\r\n  const [GameId, setGameId] = useState(null);\r\n  const [TournamentId, setTournamentId] = useState(null);\r\n  const [showMessage, setShowMessage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    setIdGame(gameId);\r\n    GetActiveTournaments(gameId);\r\n  }, []);\r\n\r\n  useEffectSkipFirst(() => {\r\n    if (gameId) {\r\n      GetActiveTournaments(gameId);\r\n    }\r\n  }, [gameId]);\r\n\r\n  useEffectSkipFirst(() => {\r\n    if (registerGameUserData) {\r\n      console.log(\"registerdata\", registerGameUserData);\r\n      if (registerGameUserData.userError) {\r\n        Swal.fire(\r\n          \"you dont have userId\",\r\n          \"you must Add your Game id in My profile page\",\r\n          \"warning\"\r\n        );\r\n        SetRegisterTournament(null);\r\n      } else if (registerGameUserData.registeredError) {\r\n        Swal.fire({title:\"your user has been registered\",icon: \"warning\"});\r\n        SetRegisterTournament(null);\r\n      } else {\r\n        setShowMessage(true);\r\n        SetRegisterTournament(null);\r\n      }\r\n    }\r\n  }, [registerGameUserData]);\r\n\r\n  useEffectSkipFirst(() => {\r\n    if (showMessage) {\r\n      Swal.fire({\r\n        position: \"center\",\r\n        icon: \"success\",\r\n        title: \"your tournment has been added\",\r\n        timer: 2000,\r\n      });\r\n      setShowMessage(false);\r\n    }\r\n  }, [showMessage]);\r\n\r\n  const SendInfo = (id) => {\r\n    let gameData = {};\r\n    gameData.GameId = gameId;\r\n    gameData.TournamentId = parseInt(id);\r\n\r\n    RegisterUserForGame(gameData);\r\n  };\r\n\r\n  const FreeCost =(value)=>{\r\n    if(value == 0 || !value){\r\n     return \"Free\"\r\n    }else {\r\n     return value;\r\n    }\r\n    \r\n   }\r\n\r\n\r\n  return (\r\n    <div className=\"ItemMatch\">\r\n      {activeTournamentData\r\n        ? activeTournamentData.map((item) => (\r\n            <div id=\"BoxIvonet\" key={item.id}>\r\n              <div className=\"titleIvonet\">\r\n                <h4>{item.Title}</h4>\r\n              </div>\r\n              <div className=\"itemMatch\">\r\n                <label>\r\n                  {\" \"}\r\n                  {item.StartDate} - {item.EndDate}\r\n                </label>\r\n              </div>\r\n              <div className=\"itemMatch\">\r\n                <label>PRIZE</label>\r\n                <label className=\"primary\">{item.Prize}$</label>\r\n              </div>\r\n              <div className=\"itemMatch\">\r\n                <label>SCORING</label>\r\n                <label className=\"primary\">BEST OF {item.Winning} GAME</label>\r\n              </div>\r\n              <div className=\"itemMatch\">\r\n                <label>DIVISIONS</label>\r\n                <label className=\"primary\">{item.KDLimit}</label>\r\n              </div>\r\n              <div className=\"itemMatch\">\r\n                <div className=\"priceCoin\">\r\n                  <div className=\"coinImg\">\r\n                    <img src={Coin} alt=\"Coin\" />\r\n                  </div>\r\n                  <label>{item.EntryFee ? item.EntryFee : FreeCost(item.EntryFee)}</label>\r\n                </div>\r\n                {user ? (\r\n                  <button\r\n                    id={item.id}\r\n                    onClick={(e) => {\r\n                      SendInfo(e.target.id);\r\n                    }}\r\n                  >\r\n                    {\" \"}\r\n                    REGISTER\r\n                  </button>\r\n                ) : (\r\n                  <NavLink to=\"/Login\">\r\n                    <button> REGISTER</button>\r\n                  </NavLink>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))\r\n        : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BoxIvonet;\r\n"],"mappings":"gIAAA,MAAOA,MAAP,EAAgBC,UAAhB,CAA4BC,MAA5B,CAAoCC,SAApC,CAA+CC,QAA/C,KAA+D,OAA/D,CACA,MAAOC,YAAP,KAAwB,2BAAxB,CACA,MAAOC,YAAP,KAAwB,gCAAxB,CACA,MAAO,2BAAP,CACA,MAAOC,KAAP,KAAiB,wBAAjB,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA,MAAOC,KAAP,KAAiB,aAAjB,CACA,MAAO,kCAAP,C,wFAEA,QAASC,mBAAT,CAA4BC,EAA5B,CAAgCC,GAAhC,CAAqC,CACnC,GAAMC,QAAO,CAAGX,MAAM,CAAC,IAAD,CAAtB,CACAC,SAAS,CAAC,UAAM,CACd,GAAIU,OAAO,CAACC,OAAZ,CAAqB,CACnBD,OAAO,CAACC,OAAR,CAAkB,KAAlB,CACA,OACD,CACDH,EAAE,GACH,CANQ,CAMNC,GANM,CAAT,CAOD,CAED,GAAMG,UAAS,CAAG,QAAZA,UAAY,MAAgB,IAAbC,OAAa,MAAbA,MAAa,CAChC,GAAMC,YAAW,CAAGhB,UAAU,CAACI,WAAD,CAA9B,CACA,GAAMa,YAAW,CAAGjB,UAAU,CAACK,WAAD,CAA9B,CACA,GAAQa,KAAR,CAAiDD,WAAjD,CAAQC,IAAR,CAAcC,KAAd,CAAiDF,WAAjD,CAAcE,KAAd,CAAqBC,eAArB,CAAiDH,WAAjD,CAAqBG,eAArB,CAAsCC,MAAtC,CAAiDJ,WAAjD,CAAsCI,MAAtC,CAEA,cAA4BlB,QAAQ,CAAC,IAAD,CAApC,wCAAOmB,MAAP,eAAeC,SAAf,eACA,GACEC,qBADF,CAOIR,WAPJ,CACEQ,oBADF,CAEEC,oBAFF,CAOIT,WAPJ,CAEES,oBAFF,CAGEC,oBAHF,CAOIV,WAPJ,CAGEU,oBAHF,CAIEC,mBAJF,CAOIX,WAPJ,CAIEW,mBAJF,CAKEC,qBALF,CAOIZ,WAPJ,CAKEY,qBALF,CAMEC,GANF,CAOIb,WAPJ,CAMEa,GANF,CAQA,eAAwC1B,QAAQ,CAAC,IAAD,CAAhD,yCAAO2B,YAAP,eAAqBC,eAArB,eACA,eAA4B5B,QAAQ,CAAC,IAAD,CAApC,yCAAO6B,MAAP,eAAeC,SAAf,eACA,eAAwC9B,QAAQ,CAAC,IAAD,CAAhD,yCAAO+B,YAAP,eAAqBC,eAArB,eACA,eAAsChC,QAAQ,CAAC,IAAD,CAA9C,0CAAOiC,WAAP,gBAAoBC,cAApB,gBAEAnC,SAAS,CAAC,UAAM,CACdqB,SAAS,CAACR,MAAD,CAAT,CACAS,oBAAoB,CAACT,MAAD,CAApB,CACD,CAHQ,CAGN,EAHM,CAAT,CAKAN,kBAAkB,CAAC,UAAM,CACvB,GAAIM,MAAJ,CAAY,CACVS,oBAAoB,CAACT,MAAD,CAApB,CACD,CACF,CAJiB,CAIf,CAACA,MAAD,CAJe,CAAlB,CAMAN,kBAAkB,CAAC,UAAM,CACvB,GAAIiB,oBAAJ,CAA0B,CACxBY,OAAO,CAACC,GAAR,CAAY,cAAZ,CAA4Bb,oBAA5B,EACA,GAAIA,oBAAoB,CAACc,SAAzB,CAAoC,CAClChC,IAAI,CAACiC,IAAL,CACE,sBADF,CAEE,8CAFF,CAGE,SAHF,EAKAb,qBAAqB,CAAC,IAAD,CAArB,CACD,CAPD,IAOO,IAAIF,oBAAoB,CAACgB,eAAzB,CAA0C,CAC/ClC,IAAI,CAACiC,IAAL,CAAU,CAACE,KAAK,CAAC,+BAAP,CAAuCC,IAAI,CAAE,SAA7C,CAAV,EACAhB,qBAAqB,CAAC,IAAD,CAArB,CACD,CAHM,IAGA,CACLS,cAAc,CAAC,IAAD,CAAd,CACAT,qBAAqB,CAAC,IAAD,CAArB,CACD,CACF,CACF,CAlBiB,CAkBf,CAACF,oBAAD,CAlBe,CAAlB,CAoBAjB,kBAAkB,CAAC,UAAM,CACvB,GAAI2B,WAAJ,CAAiB,CACf5B,IAAI,CAACiC,IAAL,CAAU,CACRI,QAAQ,CAAE,QADF,CAERD,IAAI,CAAE,SAFE,CAGRD,KAAK,CAAE,+BAHC,CAIRG,KAAK,CAAE,IAJC,CAAV,EAMAT,cAAc,CAAC,KAAD,CAAd,CACD,CACF,CAViB,CAUf,CAACD,WAAD,CAVe,CAAlB,CAYA,GAAMW,SAAQ,CAAG,QAAXA,SAAW,CAACC,EAAD,CAAQ,CACvB,GAAIC,SAAQ,CAAG,EAAf,CACAA,QAAQ,CAACjB,MAAT,CAAkBjB,MAAlB,CACAkC,QAAQ,CAACf,YAAT,CAAwBgB,QAAQ,CAACF,EAAD,CAAhC,CAEArB,mBAAmB,CAACsB,QAAD,CAAnB,CACD,CAND,CAQA,GAAME,SAAQ,CAAE,QAAVA,SAAU,CAACC,KAAD,CAAS,CACvB,GAAGA,KAAK,EAAI,CAAT,EAAc,CAACA,KAAlB,CAAwB,CACvB,MAAO,MAAP,CACA,CAFD,IAEM,CACL,MAAOA,MAAP,CACA,CAED,CAPF,CAUA,mBACE,YAAK,SAAS,CAAC,WAAf,UACG3B,oBAAoB,CACjBA,oBAAoB,CAAC4B,GAArB,CAAyB,SAACC,IAAD,qBACvB,aAAK,EAAE,CAAC,WAAR,wBACE,YAAK,SAAS,CAAC,aAAf,uBACE,oBAAKA,IAAI,CAACC,KAAV,EADF,EADF,cAIE,YAAK,SAAS,CAAC,WAAf,uBACE,yBACG,GADH,CAEGD,IAAI,CAACE,SAFR,OAEsBF,IAAI,CAACG,OAF3B,GADF,EAJF,cAUE,aAAK,SAAS,CAAC,WAAf,wBACE,gCADF,cAEE,eAAO,SAAS,CAAC,SAAjB,WAA4BH,IAAI,CAACI,KAAjC,OAFF,GAVF,cAcE,aAAK,SAAS,CAAC,WAAf,wBACE,kCADF,cAEE,eAAO,SAAS,CAAC,SAAjB,sBAAoCJ,IAAI,CAACK,OAAzC,WAFF,GAdF,cAkBE,aAAK,SAAS,CAAC,WAAf,wBACE,oCADF,cAEE,cAAO,SAAS,CAAC,SAAjB,UAA4BL,IAAI,CAACM,OAAjC,EAFF,GAlBF,cAsBE,aAAK,SAAS,CAAC,WAAf,wBACE,aAAK,SAAS,CAAC,WAAf,wBACE,YAAK,SAAS,CAAC,SAAf,uBACE,YAAK,GAAG,CAAEtD,IAAV,CAAgB,GAAG,CAAC,MAApB,EADF,EADF,cAIE,uBAAQgD,IAAI,CAACO,QAAL,CAAgBP,IAAI,CAACO,QAArB,CAAgCV,QAAQ,CAACG,IAAI,CAACO,QAAN,CAAhD,EAJF,GADF,CAOG3C,IAAI,cACH,gBACE,EAAE,CAAEoC,IAAI,CAACN,EADX,CAEE,OAAO,CAAE,iBAACc,CAAD,CAAO,CACdf,QAAQ,CAACe,CAAC,CAACC,MAAF,CAASf,EAAV,CAAR,CACD,CAJH,WAMG,GANH,cADG,cAWH,KAAC,OAAD,EAAS,EAAE,CAAC,QAAZ,uBACE,qCADF,EAlBJ,GAtBF,GAAyBM,IAAI,CAACN,EAA9B,CADuB,EAAzB,CADiB,CAiDjB,IAlDN,EADF,CAsDD,CAtID,CAwIA,cAAelC,UAAf"},"metadata":{},"sourceType":"module"}