{"ast":null,"code":"import _slicedToArray from\"/Users/samsamaei/Documents/Projects/falcon/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useRef,useEffect,useState}from\"react\";import TestContext from\"../../../Context/testContext\";import AuthContext from\"../../../Context/Auth/authContext\";import Swal from\"sweetalert2\";import\"sweetalert2/src/sweetalert2.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function useEffectSkipFirst(fn,arr){var isFirst=useRef(true);useEffect(function(){if(isFirst.current){isFirst.current=false;return;}fn();},arr);}var ChangePass=function ChangePass(){var testContext=useContext(TestContext);var authContext=useContext(AuthContext);var user=authContext.user,login=authContext.login,isAuthenticated=authContext.isAuthenticated,logout=authContext.logout;var UpdateUserPassword=testContext.UpdateUserPassword,updateUserPasswordData=testContext.updateUserPasswordData,SetUserPassword=testContext.SetUserPassword,err=testContext.err;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),Current=_useState2[0],setCurrent=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),Password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),ConfirmPassword=_useState6[0],setConfirmPassword=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),showMessage=_useState8[0],setShowMessage=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),showMessage2=_useState10[0],setShowMessage2=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),ErrorInput=_useState12[0],setErrorInput=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),ErrorLength=_useState14[0],setErrorLength=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),ErrorEpty=_useState16[0],setErrorEpty=_useState16[1];var sendUserData=function sendUserData(){var newUser={};newUser.CurrentPassword=Current;newUser.Password=Password;if(Current.length<1&&Password.length<1){setErrorEpty(true);}else if(Password.length<8){setErrorLength(true);}else{UpdateUserPassword(newUser);console.log(\"pass\",newUser);}};useEffectSkipFirst(function(){if(updateUserPasswordData){if(updateUserPasswordData.status==true){setShowMessage(true);SetUserPassword(null);}else{setShowMessage2(true);SetUserPassword(null);}}},[updateUserPasswordData]);useEffectSkipFirst(function(){if(showMessage2){Swal.fire({position:\"center\",icon:\"error\",title:\"Your current password is wrong\",showConfirmButton:false,timer:1500});setShowMessage2(false);}},[showMessage2]);useEffectSkipFirst(function(){if(showMessage){Swal.fire({position:\"center\",icon:\"success\",title:\"Your Password has been changed\",showConfirmButton:false,timer:1500});setShowMessage(false);}},[showMessage]);useEffectSkipFirst(function(){setErrorEpty(false);if(ConfirmPassword!=Password){setErrorInput(\"ErorrInput\");}else{setErrorInput();}},[ConfirmPassword]);useEffectSkipFirst(function(){if(Password){setErrorEpty(false);if(Password.length<8){setErrorLength(true);}else{setErrorLength(false);}}},[Password]);useEffectSkipFirst(function(){if(Current){setErrorEpty(false);}},[Current]);return/*#__PURE__*/_jsxs(\"div\",{className:\"Setiings\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Title\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Your Password\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"PersonalEdit\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Current Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:Current,onChange:function onChange(e){setCurrent(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:Password,onChange:function onChange(e){setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Confirm New Password\"}),/*#__PURE__*/_jsx(\"input\",{className:ErrorInput,type:\"password\",value:ConfirmPassword,onChange:function onChange(e){setConfirmPassword(e.target.value);}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttonSetting2\",children:[ErrorLength?/*#__PURE__*/_jsx(\"h4\",{children:\"Your Password should more than 8 characters\"}):null,ErrorEpty?/*#__PURE__*/_jsx(\"h4\",{children:\"Password and New Password is required\"}):null,/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){sendUserData();},children:\"Save Changes\"})]})]});};export default ChangePass;","map":{"version":3,"names":["React","useContext","useRef","useEffect","useState","TestContext","AuthContext","Swal","useEffectSkipFirst","fn","arr","isFirst","current","ChangePass","testContext","authContext","user","login","isAuthenticated","logout","UpdateUserPassword","updateUserPasswordData","SetUserPassword","err","Current","setCurrent","Password","setPassword","ConfirmPassword","setConfirmPassword","showMessage","setShowMessage","showMessage2","setShowMessage2","ErrorInput","setErrorInput","ErrorLength","setErrorLength","ErrorEpty","setErrorEpty","sendUserData","newUser","CurrentPassword","length","console","log","status","fire","position","icon","title","showConfirmButton","timer","e","target","value"],"sources":["/Users/samsamaei/Documents/Projects/falcon/src/Components/UserEdit/Items/ChangePass.js"],"sourcesContent":["import React, { useContext, useRef, useEffect, useState } from \"react\";\nimport TestContext from \"../../../Context/testContext\";\nimport AuthContext from \"../../../Context/Auth/authContext\";\nimport Swal from \"sweetalert2\";\nimport \"sweetalert2/src/sweetalert2.scss\";\n\nfunction useEffectSkipFirst(fn, arr) {\n  const isFirst = useRef(true);\n  useEffect(() => {\n    if (isFirst.current) {\n      isFirst.current = false;\n      return;\n    }\n    fn();\n  }, arr);\n}\n\nconst ChangePass = () => {\n  const testContext = useContext(TestContext);\n  const authContext = useContext(AuthContext);\n  const { user, login, isAuthenticated, logout } = authContext;\n\n  const { UpdateUserPassword, updateUserPasswordData, SetUserPassword, err } =\n    testContext;\n\n  const [Current, setCurrent] = useState('');\n  const [Password, setPassword] = useState('');\n  const [ConfirmPassword, setConfirmPassword] = useState('');\n  const [showMessage, setShowMessage] = useState(null);\n  const [showMessage2, setShowMessage2] = useState(null);\n  const [ErrorInput, setErrorInput] = useState();\n  const [ErrorLength, setErrorLength] = useState(false);\n  const [ErrorEpty, setErrorEpty] = useState(false);\n\n  const sendUserData = () => {\n    let newUser = {};\n    newUser.CurrentPassword = Current;\n    newUser.Password = Password;\n    if(Current.length<1 && Password.length <1){\n      setErrorEpty(true);\n    } else if (Password.length < 8) {\n      setErrorLength(true);\n    } else {\n      UpdateUserPassword(newUser);\n      console.log(\"pass\", newUser);\n      \n    }\n\n  };\n\n  useEffectSkipFirst(() => {\n    if (updateUserPasswordData) {\n      if(updateUserPasswordData.status ==true)\n      {\n\n        setShowMessage(true);\n        SetUserPassword(null);\n      }\n      else{\n        setShowMessage2(true);\n        SetUserPassword(null);\n      }\n      \n      \n    }\n  }, [updateUserPasswordData]);\n\n  useEffectSkipFirst(() => {\n    if (showMessage2) {\n      Swal.fire({\n        position: \"center\",\n        icon: \"error\",\n        title: \"Your current password is wrong\",\n        showConfirmButton: false,\n        timer: 1500,\n      });\n      setShowMessage2(false);\n    }\n  }, [showMessage2]);\n\n  useEffectSkipFirst(() => {\n    if (showMessage) {\n      Swal.fire({\n        position: \"center\",\n        icon: \"success\",\n        title: \"Your Password has been changed\",\n        showConfirmButton: false,\n        timer: 1500,\n      });\n      setShowMessage(false);\n    }\n  }, [showMessage]);\n\n  useEffectSkipFirst(() => {\n    setErrorEpty(false);\n    if (ConfirmPassword != Password) {\n      setErrorInput(\"ErorrInput\");\n    } else {\n      setErrorInput();\n    }\n  }, [ConfirmPassword]);\n\n  useEffectSkipFirst(() => {\n    if (Password) {\n      setErrorEpty(false);\n      if (Password.length < 8) {\n        setErrorLength(true);\n      } else {\n        setErrorLength(false);\n      }\n    }\n  }, [Password]);\n  useEffectSkipFirst(() => {\n    if (Current) {\n      setErrorEpty(false);\n      \n    }\n  }, [Current]);\n  \n  return (\n    <div className=\"Setiings\">\n      <div className=\"Title\">\n        <h4>Your Password</h4>\n      </div>\n      <div className=\"PersonalEdit\">\n        <div className=\"item\">\n          <h5>Current Password</h5>\n          <input\n            type=\"password\"\n            value={Current}\n            onChange={(e) => {\n              setCurrent(e.target.value);\n            }}\n          />\n        </div>\n        <div className=\"item\">\n          <h5>New Password</h5>\n          <input\n            type=\"password\"\n            value={Password}\n            onChange={(e) => {\n              setPassword(e.target.value);\n            }}\n          />\n        </div>\n        <div className=\"item\">\n          <h5>Confirm New Password</h5>\n          <input\n            className={ErrorInput}\n            type=\"password\"\n            value={ConfirmPassword}\n            onChange={(e) => {\n              setConfirmPassword(e.target.value);\n            }}\n          />\n        </div>\n      </div>\n      <div className=\"buttonSetting2\">\n        {ErrorLength ? (\n          <h4>Your Password should more than 8 characters</h4>\n        ) : null}\n        {ErrorEpty ? (\n          <h4>Password and New Password is required</h4>\n        ) : null}\n        <button\n          onClick={(e) => {\n            sendUserData();\n          }}\n        >\n          Save Changes\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ChangePass;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}