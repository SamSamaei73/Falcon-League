{"ast":null,"code":"import _slicedToArray from\"/Users/samsamaei/Documents/Projects/falcon/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useRef,useEffect,useState}from\"react\";import TestContext from\"../../../Context/testContext\";import AuthContext from\"../../../Context/Auth/authContext\";import Swal from\"sweetalert2\";import\"sweetalert2/src/sweetalert2.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function useEffectSkipFirst(fn,arr){var isFirst=useRef(true);useEffect(function(){if(isFirst.current){isFirst.current=false;return;}fn();},arr);}var Setiings=function Setiings(){var testContext=useContext(TestContext);var authContext=useContext(AuthContext);var user=authContext.user,login=authContext.login,isAuthenticated=authContext.isAuthenticated,logout=authContext.logout;var userInfoData=testContext.userInfoData,GetUserInfo=testContext.GetUserInfo,updateUserData=testContext.updateUserData,UpdateUserInfo=testContext.UpdateUserInfo,SetUserSetting=testContext.SetUserSetting,err=testContext.err;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),DataUser=_useState2[0],setDataUser=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),Firstname=_useState4[0],setFirstname=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),Username=_useState6[0],setUsername=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),Birthdate=_useState8[0],setBirthdate=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),showMessage=_useState10[0],setShowMessage=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),showMessage2=_useState12[0],setShowMessage2=_useState12[1];useEffect(function(){GetUserInfo();},[]);useEffectSkipFirst(function(){if(userInfoData){}},[userInfoData]);useEffectSkipFirst(function(){if(userInfoData){var newItem={};setFirstname(userInfoData.Firstname);setBirthdate(userInfoData.Birthdate);setUsername(userInfoData.Username);}},[userInfoData]);var sendUserData=function sendUserData(){var newUser={};if(Firstname.length>3&&Username.length>3){newUser.FirstName=Firstname;newUser.Birthdate=Birthdate;newUser.Username=Username;UpdateUserInfo(newUser);}else{console.log(\"empty\");}};useEffectSkipFirst(function(){if(updateUserData){if(updateUserData.status==true){setShowMessage(true);SetUserSetting(null);}else{setShowMessage2(true);SetUserSetting(null);}}},[updateUserData]);useEffectSkipFirst(function(){if(showMessage){Swal.fire({position:\"center\",icon:\"success\",title:\"Your Information has been Updated\",showConfirmButton:false,timer:1500});setShowMessage(false);}},[showMessage]);useEffectSkipFirst(function(){if(showMessage2){Swal.fire({position:\"center\",icon:\"error\",title:\"Your new Username has been selected before\",showConfirmButton:false,timer:1500});setShowMessage2(false);}},[showMessage2]);return/*#__PURE__*/_jsxs(\"div\",{className:\"Setiings\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Title\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Personal Information\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"PersonalEdit\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:Firstname,onChange:function onChange(e){return setFirstname(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Date of Birth\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:Birthdate,onChange:function onChange(e){return setBirthdate(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"FLC ID (Username)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:Username,onChange:function onChange(e){return setUsername(e.target.value);}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"buttonSetting\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){sendUserData();},children:\"Save Changes\"})})]});};export default Setiings;","map":{"version":3,"names":["React","useContext","useRef","useEffect","useState","TestContext","AuthContext","Swal","useEffectSkipFirst","fn","arr","isFirst","current","Setiings","testContext","authContext","user","login","isAuthenticated","logout","userInfoData","GetUserInfo","updateUserData","UpdateUserInfo","SetUserSetting","err","DataUser","setDataUser","Firstname","setFirstname","Username","setUsername","Birthdate","setBirthdate","showMessage","setShowMessage","showMessage2","setShowMessage2","newItem","sendUserData","newUser","length","FirstName","console","log","status","fire","position","icon","title","showConfirmButton","timer","e","target","value"],"sources":["/Users/samsamaei/Documents/Projects/falcon/src/Components/UserEdit/Items/Setiings.js"],"sourcesContent":["import React, { useContext, useRef, useEffect, useState } from \"react\";\nimport TestContext from \"../../../Context/testContext\";\nimport AuthContext from \"../../../Context/Auth/authContext\";\nimport Swal from \"sweetalert2\";\nimport \"sweetalert2/src/sweetalert2.scss\";\n\nfunction useEffectSkipFirst(fn, arr) {\n  const isFirst = useRef(true);\n  useEffect(() => {\n    if (isFirst.current) {\n      isFirst.current = false;\n      return;\n    }\n    fn();\n  }, arr);\n}\n\nconst Setiings = () => {\n  const testContext = useContext(TestContext);\n  const authContext = useContext(AuthContext);\n  const { user, login, isAuthenticated, logout } = authContext;\n\n  const {\n    userInfoData,\n    GetUserInfo,\n    updateUserData,\n    UpdateUserInfo,\n    SetUserSetting,\n    err,\n  } = testContext;\n  const [DataUser, setDataUser] = useState(null);\n  const [Firstname, setFirstname] = useState(null);\n  const [Username, setUsername] = useState(null);\n  const [Birthdate, setBirthdate] = useState(null);\n  const [showMessage, setShowMessage] = useState(null);\n  const [showMessage2, setShowMessage2] = useState(null);\n\n  useEffect(() => {\n    GetUserInfo();\n  }, []);\n\n  useEffectSkipFirst(() => {\n    if (userInfoData) {\n    }\n  }, [userInfoData]);\n\n  useEffectSkipFirst(() => {\n    if (userInfoData) {\n      let newItem = {};\n      setFirstname(userInfoData.Firstname);\n      setBirthdate(userInfoData.Birthdate);\n      setUsername(userInfoData.Username);\n    }\n  }, [userInfoData]);\n\n  const sendUserData = () => {\n    let newUser = {};\n    if(Firstname.length > 3 && Username.length > 3){\n\n    newUser.FirstName = Firstname;\n    newUser.Birthdate = Birthdate;\n    newUser.Username = Username;\n\n    UpdateUserInfo(newUser);\n    }else {\n      console.log(\"empty\");\n    }\n\n  };\n\n\n\n  useEffectSkipFirst(() => {\n    if (updateUserData) {\n        if(updateUserData.status == true){\n\n          setShowMessage(true);\n          SetUserSetting(null);\n        } else {\n          setShowMessage2(true);\n          SetUserSetting(null);\n        }\n      \n    }\n  }, [updateUserData]);\n\n  useEffectSkipFirst(() => {\n    if (showMessage) {\n      Swal.fire({\n        position: \"center\",\n        icon: \"success\",\n        title: \"Your Information has been Updated\",\n        showConfirmButton: false,\n        timer: 1500,\n      });\n      setShowMessage(false);\n    }\n  }, [showMessage]);\n\n  useEffectSkipFirst(() => {\n    if (showMessage2) {\n      Swal.fire({\n        position: \"center\",\n        icon: \"error\",\n        title: \"Your new Username has been selected before\",\n        showConfirmButton: false,\n        timer: 1500,\n      });\n      setShowMessage2(false);\n    }\n  }, [showMessage2]);\n\n  return (\n    <div className=\"Setiings\">\n      <div className=\"Title\">\n        <h4>Personal Information</h4>\n      </div>\n      <div className=\"PersonalEdit\">\n        <div className=\"item\">\n          <h5>Full Name</h5>\n          <input\n            type=\"text\"\n            value={Firstname}\n            onChange={(e) => setFirstname(e.target.value)}\n          />\n        </div>\n        <div className=\"item\">\n          <h5>Date of Birth</h5>\n          <input\n            type=\"date\"\n            value={Birthdate}\n            onChange={(e) => setBirthdate(e.target.value)}\n          />\n        </div>\n        <div className=\"item\">\n          <h5>FLC ID (Username)</h5>\n          <input\n            type=\"text\"\n            value={Username}\n            onChange={(e) => setUsername(e.target.value)}\n          />\n        </div>\n      </div>\n\n      <div className=\"buttonSetting\">\n        <button\n          onClick={(e) => {\n            sendUserData();\n          }}\n        >\n          Save Changes\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Setiings;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}