{"ast":null,"code":"import _objectSpread from\"/Users/samsamaei/Documents/Projects/falcon/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{USER_LOADED,AUTH_ERROR,LOGIN_SUCCESS,SET_AUTH_HEADER,LOGIN_FAIL,LOGOUT,CLEAR_ERRORS}from\"../types\";import setAuthToken from\"../../Components/Tools/setAuthToken\";export default(function(state,action){switch(action.type){case SET_AUTH_HEADER:return _objectSpread(_objectSpread({},state),{},{token:action.payload});case USER_LOADED:localStorage.isAuthenticated=true;localStorage.loading=false;localStorage.user=JSON.stringify(action.payload);return _objectSpread(_objectSpread({},state),{},{isAuthenticated:true,loading:false,user:action.payload});case LOGIN_SUCCESS:localStorage.accessToken=action.payload.accessToken;localStorage.refreshToken=action.payload.refreshToken;localStorage.isAuthenticated=true;localStorage.loading=false;return _objectSpread(_objectSpread(_objectSpread({},state),action.payload),{},{isAuthenticated:true,loading:false//token: action.payload.token,\n});// case REGISTER_FAIL:\ncase AUTH_ERROR:case LOGIN_FAIL:case LOGOUT:localStorage.removeItem(\"accessToken\");localStorage.removeItem(\"refreshToken\");localStorage.removeItem(\"isAuthenticated\");localStorage.removeItem(\"loading\");localStorage.removeItem(\"user\");localStorage.removeItem(\"error\");return _objectSpread(_objectSpread({},state),{},{token:null,isAuthenticated:null,loading:false,user:null,error:action.payload});case CLEAR_ERRORS:return _objectSpread(_objectSpread({},state),{},{error:null});default:return state;}});","map":{"version":3,"names":["USER_LOADED","AUTH_ERROR","LOGIN_SUCCESS","SET_AUTH_HEADER","LOGIN_FAIL","LOGOUT","CLEAR_ERRORS","setAuthToken","state","action","type","token","payload","localStorage","isAuthenticated","loading","user","JSON","stringify","accessToken","refreshToken","removeItem","error"],"sources":["/Users/samsamaei/Documents/Projects/falcon/src/Context/Auth/AuthReducer.js"],"sourcesContent":["import {\r\n  USER_LOADED,\r\n  AUTH_ERROR,\r\n  LOGIN_SUCCESS,\r\n  SET_AUTH_HEADER,\r\n  LOGIN_FAIL,\r\n  LOGOUT,\r\n  CLEAR_ERRORS,\r\n} from \"../types\";\r\nimport setAuthToken from \"../../Components/Tools/setAuthToken\";\r\n\r\nexport default (state, action) => {\r\n  switch (action.type) {\r\n    case SET_AUTH_HEADER:\r\n      return {\r\n        ...state,\r\n        token: action.payload,\r\n      };\r\n\r\n    case USER_LOADED:\r\n      localStorage.isAuthenticated = true;\r\n      localStorage.loading = false;\r\n      localStorage.user = JSON.stringify(action.payload);\r\n      return {\r\n        ...state,\r\n        isAuthenticated: true,\r\n        loading: false,\r\n        user: action.payload,\r\n      };\r\n\r\n    case LOGIN_SUCCESS:\r\n      localStorage.accessToken = action.payload.accessToken;\r\n      localStorage.refreshToken = action.payload.refreshToken;\r\n      localStorage.isAuthenticated = true;\r\n      localStorage.loading = false;\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        isAuthenticated: true,\r\n        loading: false,\r\n        //token: action.payload.token,\r\n      };\r\n    // case REGISTER_FAIL:\r\n    case AUTH_ERROR:\r\n    case LOGIN_FAIL:\r\n    case LOGOUT:\r\n      localStorage.removeItem(\"accessToken\");\r\n      localStorage.removeItem(\"refreshToken\");\r\n      localStorage.removeItem(\"isAuthenticated\");\r\n      localStorage.removeItem(\"loading\");\r\n      localStorage.removeItem(\"user\");\r\n      localStorage.removeItem(\"error\");\r\n      return {\r\n        ...state,\r\n        token: null,\r\n        isAuthenticated: null,\r\n        loading: false,\r\n        user: null,\r\n        error: action.payload,\r\n      };\r\n    case CLEAR_ERRORS:\r\n      return {\r\n        ...state,\r\n        error: null,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n"],"mappings":"+HAAA,OACEA,WADF,CAEEC,UAFF,CAGEC,aAHF,CAIEC,eAJF,CAKEC,UALF,CAMEC,MANF,CAOEC,YAPF,KAQO,UARP,CASA,MAAOC,aAAP,KAAyB,qCAAzB,CAEA,eAAe,SAACC,KAAD,CAAQC,MAAR,CAAmB,CAChC,OAAQA,MAAM,CAACC,IAAf,EACE,IAAKP,gBAAL,CACE,sCACKK,KADL,MAEEG,KAAK,CAAEF,MAAM,CAACG,OAFhB,GAKF,IAAKZ,YAAL,CACEa,YAAY,CAACC,eAAb,CAA+B,IAA/B,CACAD,YAAY,CAACE,OAAb,CAAuB,KAAvB,CACAF,YAAY,CAACG,IAAb,CAAoBC,IAAI,CAACC,SAAL,CAAeT,MAAM,CAACG,OAAtB,CAApB,CACA,sCACKJ,KADL,MAEEM,eAAe,CAAE,IAFnB,CAGEC,OAAO,CAAE,KAHX,CAIEC,IAAI,CAAEP,MAAM,CAACG,OAJf,GAOF,IAAKV,cAAL,CACEW,YAAY,CAACM,WAAb,CAA2BV,MAAM,CAACG,OAAP,CAAeO,WAA1C,CACAN,YAAY,CAACO,YAAb,CAA4BX,MAAM,CAACG,OAAP,CAAeQ,YAA3C,CACAP,YAAY,CAACC,eAAb,CAA+B,IAA/B,CACAD,YAAY,CAACE,OAAb,CAAuB,KAAvB,CACA,oDACKP,KADL,EAEKC,MAAM,CAACG,OAFZ,MAGEE,eAAe,CAAE,IAHnB,CAIEC,OAAO,CAAE,KACT;AALF,GAOF;AACA,IAAKd,WAAL,CACA,IAAKG,WAAL,CACA,IAAKC,OAAL,CACEQ,YAAY,CAACQ,UAAb,CAAwB,aAAxB,EACAR,YAAY,CAACQ,UAAb,CAAwB,cAAxB,EACAR,YAAY,CAACQ,UAAb,CAAwB,iBAAxB,EACAR,YAAY,CAACQ,UAAb,CAAwB,SAAxB,EACAR,YAAY,CAACQ,UAAb,CAAwB,MAAxB,EACAR,YAAY,CAACQ,UAAb,CAAwB,OAAxB,EACA,sCACKb,KADL,MAEEG,KAAK,CAAE,IAFT,CAGEG,eAAe,CAAE,IAHnB,CAIEC,OAAO,CAAE,KAJX,CAKEC,IAAI,CAAE,IALR,CAMEM,KAAK,CAAEb,MAAM,CAACG,OANhB,GAQF,IAAKN,aAAL,CACE,sCACKE,KADL,MAEEc,KAAK,CAAE,IAFT,GAIF,QACE,MAAOd,MAAP,CAtDJ,CAwDD,CAzDD"},"metadata":{},"sourceType":"module"}